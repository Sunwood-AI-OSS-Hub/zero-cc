# コマンド生成パターン

## スラッシュコマンドとは

Claude Codeで `/command-name` として呼び出せるカスタムショートカット。
繰り返しプロンプトの再利用に最適。

## コマンド配置場所

| スコープ | パス | 用途 |
|----------|------|------|
| プロジェクト | `.claude/commands/` | チーム共有 |
| ユーザー | `~/.claude/commands/` | 個人用 |

## 基本構造

```markdown
# コマンドの説明（任意、コメント的役割）

[プロンプト本文]

$ARGUMENTS があれば引数として展開される
```

## 引数の使い方

`$ARGUMENTS` はコマンド呼び出し時の追加テキストに置換:

```
/review $ARGUMENTS
↓
/review src/main.py
```

## 生成手順

### 1. 要件整理

- 何を繰り返し依頼しているか？
- どんな引数が必要か？
- 出力形式は？

### 2. コマンドファイル作成

```bash
mkdir -p .claude/commands
touch .claude/commands/command-name.md
```

### 3. プロンプト記述

**シンプルな例:**
```markdown
コードを日本語でレビューして、改善点をリストアップ:

$ARGUMENTS
```

**構造化された例:**
```markdown
以下のファイルについてセキュリティレビューを実施:

## 対象
$ARGUMENTS

## チェック項目
1. SQLインジェクション
2. XSS
3. 認証・認可の問題
4. 機密情報の露出

## 出力形式
- 重要度: Critical/High/Medium/Low
- 箇所: ファイル:行番号
- 説明: 問題の詳細
- 修正案: 具体的な修正コード
```

## 実践例

### /commit - コミットメッセージ生成

```markdown
ステージされた変更からConventional Commits形式のコミットメッセージを生成:

## ルール
- type: feat/fix/docs/style/refactor/test/chore
- scope: 変更対象のモジュール
- 本文は日本語

## 追加コンテキスト
$ARGUMENTS
```

### /explain - コード解説

```markdown
以下のコードを初心者向けに解説:

$ARGUMENTS

## 解説形式
1. 概要（1-2文）
2. 処理の流れ（箇条書き）
3. 重要なポイント
4. 関連する概念
```

### /test - テスト生成

```markdown
以下のコードに対するユニットテストを生成:

$ARGUMENTS

## 要件
- フレームワーク: pytest
- カバレッジ: 主要パス + エッジケース
- モック: 外部依存はモック化
```

### /doc - ドキュメント生成

```markdown
以下のコードからAPIドキュメントを生成:

$ARGUMENTS

## 形式
- 関数/クラスごとにdocstring
- 引数・戻り値・例外を明記
- 使用例を含める
```

### /refactor - リファクタリング提案

```markdown
以下のコードのリファクタリングを提案:

$ARGUMENTS

## 観点
1. 可読性
2. 保守性
3. パフォーマンス
4. テスタビリティ

## 出力
- Before/Afterコード
- 変更理由
```

## ベストプラクティス

✅ 1コマンド1目的
✅ 出力形式を明確に指定
✅ $ARGUMENTSの想定用途を考慮
✅ プロジェクト固有の文脈を含める

❌ 複雑すぎるロジックを含める（スキル向き）
❌ 引数なしの汎用コマンド
❌ 曖昧な指示
